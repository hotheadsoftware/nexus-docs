<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-adding-panel" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Adding a New Panel | Nexus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hotheadsoftware.github.io/nexus-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hotheadsoftware.github.io/nexus-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hotheadsoftware.github.io/nexus-docs/docs/adding-panel"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Adding a New Panel | Nexus"><meta data-rh="true" name="description" content="Discussion"><meta data-rh="true" property="og:description" content="Discussion"><link data-rh="true" rel="icon" href="/nexus-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hotheadsoftware.github.io/nexus-docs/docs/adding-panel"><link data-rh="true" rel="alternate" href="https://hotheadsoftware.github.io/nexus-docs/docs/adding-panel" hreflang="en"><link data-rh="true" rel="alternate" href="https://hotheadsoftware.github.io/nexus-docs/docs/adding-panel" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/nexus-docs/blog/rss.xml" title="Nexus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/nexus-docs/blog/atom.xml" title="Nexus Atom Feed"><link rel="stylesheet" href="/nexus-docs/assets/css/styles.7b5d97d3.css">
<script src="/nexus-docs/assets/js/runtime~main.e644afd7.js" defer="defer"></script>
<script src="/nexus-docs/assets/js/main.ae157268.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/nexus-docs/"><div class="navbar__logo"><img src="/nexus-docs/img/docusaurus.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/nexus-docs/img/docusaurus.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Nexus</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hotheadsoftware/nexus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nexus-docs/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nexus-docs/docs/making-use">Making Use of Nexus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/nexus-docs/docs/adding-panel">Adding a New Panel</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/nexus-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Adding a New Panel</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Adding a New Panel</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="discussion">Discussion<a href="#discussion" class="hash-link" aria-label="Direct link to Discussion" title="Direct link to Discussion">​</a></h2>
<p>To support the &quot;Multiple User Tiers, Internal &amp; External Users&quot; possibility,
we need to be able to create new Filament panels and quickly wire them into
the existing multi-tenancy system. We also probably want to bring along the
custom branding functionality and other stuff we&#x27;ve built into the primary
panels.</p>
<p>The procedure for doing this on a stock Nexus install follows. If you have
implemented any customizations of Nexus, you&#x27;ll need to account for those
as part of this process.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="procedure">Procedure<a href="#procedure" class="hash-link" aria-label="Direct link to Procedure" title="Direct link to Procedure">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="estimated-completion-time">Estimated Completion Time<a href="#estimated-completion-time" class="hash-link" aria-label="Direct link to Estimated Completion Time" title="Direct link to Estimated Completion Time">​</a></h3>
<p>15-60 minutes. As you get more familiar with the operation, it will proceed
much faster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initial-instructions">Initial Instructions<a href="#initial-instructions" class="hash-link" aria-label="Direct link to Initial Instructions" title="Direct link to Initial Instructions">​</a></h3>
<p>For the purposes of this procedure, we need to follow some conventions.
To make use of this code, you will need to do some replacement operations
to fill in the values you need.</p>
<p>We have provided an example which will create a Buyer model and all the
necessary wiring for buyers to log into their own tenant-context panel.</p>
<p>Choose the name of your new panel/model/user-type.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="procedure-preparation">Procedure Preparation<a href="#procedure-preparation" class="hash-link" aria-label="Direct link to Procedure Preparation" title="Direct link to Procedure Preparation">​</a></h3>
<p>Copy this documentation into an editor that supports <strong>case-sensitive</strong> find/replace.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">replace BUYER with the UPPERCASE name of your desired model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replace buyer with the lowercase name of your desired model.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replace Buyer with the Name of your desired model.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-panel">Create the Panel<a href="#create-the-panel" class="hash-link" aria-label="Direct link to Create the Panel" title="Direct link to Create the Panel">​</a></h3>
<ol>
<li><code>artisan make:filament-panel Buyer</code></li>
<li>Confirm that the new provider is listed in config/app.php: BuyerPanelProvider::class.</li>
<li>Move it to the bottom of the list. We want it to load after the tenancy stuff.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-model">Create the Model<a href="#create-the-model" class="hash-link" aria-label="Direct link to Create the Model" title="Direct link to Create the Model">​</a></h3>
<p><code>artisan make:model Buyer --migration</code></p>
<p>Your Buyer model should extend and implement as follows:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Foundation\Auth\User as Authenticatable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Buyer extends Authenticatable implements \OwenIt\Auditing\Contracts\Auditable, FilamentUser</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add this list of traits to your new Model</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> use Auditable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     AuthenticationLoggable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     HasApiTokens,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     HasRoles,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Notifiable;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add the following function to your Model</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public function canAccessPanel(Panel $panel): bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $panel-&gt;getId() === BuyerPanelProvider::PANEL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The model-creation command also created a migration.</p>
<p>Move the create_buyers_table migration to the <code>database/migrations/tenant/</code> folder.</p>
<p>In the create_users_table migration, copy the contents of the table closure (the fields
being created). Paste these into the create_buyers_table migration. The buyers table will
(at least initially) be identical to the users table. It can grow over time, but these
fields should remain in place and unchanged.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-guard">Authentication: Guard<a href="#authentication-guard" class="hash-link" aria-label="Direct link to Authentication: Guard" title="Direct link to Authentication: Guard">​</a></h3>
<p>Open config/auth.php and create a new guard in the &#x27;guards&#x27; array.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;buyer&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;driver&#x27;   =&gt; &#x27;session&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;provider&#x27; =&gt; &#x27;buyers&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-provider">Authentication: Provider<a href="#authentication-provider" class="hash-link" aria-label="Direct link to Authentication: Provider" title="Direct link to Authentication: Provider">​</a></h3>
<p>... and create a new provider in the &#x27;providers&#x27; array:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;buyers&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;driver&#x27; =&gt; &#x27;eloquent&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;model&#x27;  =&gt; App\Models\Buyer::class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-creds">Authentication: Creds<a href="#authentication-creds" class="hash-link" aria-label="Direct link to Authentication: Creds" title="Direct link to Authentication: Creds">​</a></h3>
<p>In .env and .env.example, add some new user keys:</p>
<div class="language-.env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-.env codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BUYER_PANEL_USER_NAME=&quot;Buyer Person&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUYER_PANEL_USER_EMAIL=&quot;buyer@localhost.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUYER_PANEL_USER_PASSWORD=&quot;password&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In config/panels.php, add the buyer panel references:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;buyer&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;user&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;name&#x27;     =&gt; env(&#x27;BUYER_PANEL_USER_NAME&#x27;, &#x27;&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;email&#x27;    =&gt; env(&#x27;BUYER_PANEL_USER_EMAIL&#x27;, &#x27;&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;password&#x27; =&gt; env(&#x27;BUYER_PANEL_USER_PASSWORD&#x27;, &#x27;&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-seeder">Authentication: Seeder<a href="#authentication-seeder" class="hash-link" aria-label="Direct link to Authentication: Seeder" title="Direct link to Authentication: Seeder">​</a></h3>
<p>Modify the database/tenants/UserSeeder class. You&#x27;re going to add logic here for creating
a new Buyer in the tenant context.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    Buyer::firstOrCreate([&#x27;email&#x27; =&gt; config(&#x27;panels.buyer.user.email&#x27;)],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;name&#x27;              =&gt; config(&#x27;panels.buyer.user.name&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;email&#x27;             =&gt; config(&#x27;panels.buyer.user.email&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;password&#x27;          =&gt; Hash::make(config(&#x27;panels.buyer.user.password&#x27;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;email_verified_at&#x27; =&gt; now(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="panel-changes">Panel Changes<a href="#panel-changes" class="hash-link" aria-label="Direct link to Panel Changes" title="Direct link to Panel Changes">​</a></h3>
<p>Now, let&#x27;s ensure our Panel functionality is in place. Open <code>Providers/Filament/BuyerPanelProvider.php</code>.</p>
<p>Add a constant for panel name:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    public const PANEL = &#x27;buyer&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="panel-method-calls">Panel Method Calls<a href="#panel-method-calls" class="hash-link" aria-label="Direct link to Panel Method Calls" title="Direct link to Panel Method Calls">​</a></h3>
<p>Add or updated the following method calls to the panel() method&#x27;s $panel return:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;id(self::PANEL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;path(self::PANEL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;spa()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;login()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;registration()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;authGuard(self::PANEL)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Note: You can add some dynamic logic to the registration method. If the closure returns true, registration
will be enabled. False? The &quot;sign up&quot; link disappears and registration page returns a 404.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="panel-middleware">Panel Middleware<a href="#panel-middleware" class="hash-link" aria-label="Direct link to Panel Middleware" title="Direct link to Panel Middleware">​</a></h3>
<p>Add the following middleware to any panel in the Tenant context:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    PreventAccessFromCentralDomains::class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    InitializeTenancyByDomain::class,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Customize the panel&#x27;s default colors array as desired for your own branding.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="personal-access-api-tokens">Personal Access API Tokens<a href="#personal-access-api-tokens" class="hash-link" aria-label="Direct link to Personal Access API Tokens" title="Direct link to Personal Access API Tokens">​</a></h3>
<p>If you want to offer Buyers a REST API with personal access tokens, add the following:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt;plugins([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BreezyCore::make()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -&gt;myProfile(shouldRegisterNavigation: false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -&gt;enableSanctumTokens(permissions: [&#x27;create&#x27;, &#x27;read&#x27;, &#x27;update&#x27;, &#x27;delete&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>You can be as granular as you desire with the token permissions listed. Our example
is probably too broad for most use-cases.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-branding">Custom Branding<a href="#custom-branding" class="hash-link" aria-label="Direct link to Custom Branding" title="Direct link to Custom Branding">​</a></h3>
<p>Copy the register() function from OperatePanelProvider. Pase that into your BuyerPanelProvider.</p>
<p>If you need a custom logo view for this new panel, copy resources/views/filament/tenant.blade.php
to a new blade file in the same folder and change the reference in the BuyerPanelProvider&#x27;s
register() function.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recreate-your-local-tenants">Recreate Your Local Tenants<a href="#recreate-your-local-tenants" class="hash-link" aria-label="Direct link to Recreate Your Local Tenants" title="Direct link to Recreate Your Local Tenants">​</a></h2>
<p>Note that it&#x27;s a solid practice to routine perform artisan migrate<!-- -->:fresh<!-- --> --seed so that you&#x27;re
constantly testing your ability to recreate environments from scratch. That&#x27;s what we recommend
here. Destroy and recreate your local environment, then log into each panel and confirm your
changes are good.</p>
<p>artisan migrate<!-- -->:fresh<!-- --> --seed</p>
<p>NOTE: You don&#x27;t have to delete/recreate in Production environments! This is purely a convenience
for your local environment. In production, we would expect that there will be no users initially.
Those can be managed by your subscriber in the interface (if you build a Buyers resource) or they
can register if registration is enabled.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hotheadsoftware/nexus-docs/docs/adding-panel.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/nexus-docs/docs/making-use"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Making Use of Nexus</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#discussion" class="table-of-contents__link toc-highlight">Discussion</a></li><li><a href="#procedure" class="table-of-contents__link toc-highlight">Procedure</a><ul><li><a href="#estimated-completion-time" class="table-of-contents__link toc-highlight">Estimated Completion Time</a></li><li><a href="#initial-instructions" class="table-of-contents__link toc-highlight">Initial Instructions</a></li><li><a href="#procedure-preparation" class="table-of-contents__link toc-highlight">Procedure Preparation</a></li><li><a href="#create-the-panel" class="table-of-contents__link toc-highlight">Create the Panel</a></li><li><a href="#create-the-model" class="table-of-contents__link toc-highlight">Create the Model</a></li><li><a href="#authentication-guard" class="table-of-contents__link toc-highlight">Authentication: Guard</a></li><li><a href="#authentication-provider" class="table-of-contents__link toc-highlight">Authentication: Provider</a></li><li><a href="#authentication-creds" class="table-of-contents__link toc-highlight">Authentication: Creds</a></li><li><a href="#authentication-seeder" class="table-of-contents__link toc-highlight">Authentication: Seeder</a></li><li><a href="#panel-changes" class="table-of-contents__link toc-highlight">Panel Changes</a></li><li><a href="#panel-method-calls" class="table-of-contents__link toc-highlight">Panel Method Calls</a></li><li><a href="#panel-middleware" class="table-of-contents__link toc-highlight">Panel Middleware</a></li><li><a href="#personal-access-api-tokens" class="table-of-contents__link toc-highlight">Personal Access API Tokens</a></li><li><a href="#custom-branding" class="table-of-contents__link toc-highlight">Custom Branding</a></li></ul></li><li><a href="#recreate-your-local-tenants" class="table-of-contents__link toc-highlight">Recreate Your Local Tenants</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Hot Head Software.</div></div></div></footer></div>
</body>
</html>